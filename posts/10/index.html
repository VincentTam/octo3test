
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Blog 1</title>
  <meta name="author" content="Vincent Tam">

  
  <meta name="description" content="
  
  
  
    
      
    
      
      
	Rare Sed Delimiters
      
    
    
      
        
        
           | Comments
        
	| &infin;
 ...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://vincenttam.github.io/posts/10/">
  <link href="/favicon.png" rel="icon">
  <link href="" rel="alternate" title="Blog 1" type="application/atom+xml">
  <link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css">
  <meta name="msvalidate.01" content="E421C0320103717D8EB0AD1FEC67709D" />

<link href='/stylesheets/all-9dfcc26738eca28ea427f2f353c3fccd.css' media='all' rel='stylesheet' type='text/css'>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
           })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-46788371-2', 'auto');
      ga('send', 'pageview');

  </script>
</head>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Blog 1</a></h1>
  
    <h2>Random Talk on Random Thoughts</h2>
  
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="https://vincenttam.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="https://git.io/vtam">GitHub</a></li>
  <li><a href="/presentations">Slides</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/25/rare-sed-delimiters/">Rare Sed Delimiters</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/25/rare-sed-delimiters/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/25/rare-sed-delimiters/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/25/rare-sed-delimiters/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>

<p>One can replace the usual delimiter <code class="highlighter-rouge">/</code> in <code class="highlighter-rouge">sed</code> with the other ones.
Therefore, the slashes in the <abbr title="Uniform Resource Locator">URL</abbr> inside the search pattern <em>won’t</em>
have to be escaped by backslashes, which makes the whole command ugly.</p>

<h2 id="problem">Problem</h2>

<p>If the search pattern contains multiple characters like <code class="highlighter-rouge">;</code>, <code class="highlighter-rouge">#</code>, <code class="highlighter-rouge">|</code>,
<code class="highlighter-rouge"> </code> (white space), etc, and you’re <em>too lazy</em> to look for
<a href="http://backreference.org/2010/02/20/using-different-delimiters-in-sed/">other choices of delimiters</a>, what can you do?</p>

<!-- more -->

<h2 id="discussion-on-the-custom-delimiter">Discussion on the custom delimiter</h2>

<p>When I read article at the above link, I was stuck at the last part,
which was about using a custom delimiter.  I <em>mistakenly</em> thought that
this was for the search pattern and the replacement.  In fact, reading
<a href="https://www.gnu.org/software/sed/manual/html_node/Addresses.html#Addresses">GNU’s manual</a> and trying some commands repeatedly, I realized
that prepending the custom delimiter with a backslash was for
specifying the range of the following expresion.</p>

<p>Therefore, I finally understand what <code class="highlighter-rouge">somevar</code> is in
<a href="http://stackoverflow.com/a/20808364">this Stack Overflow question</a>.</p>

<h2 id="solution">Solution</h2>

<h3 id="customizing-the-delimiter-in-a-replacement">Customizing the delimiter in a replacement</h3>

<p>To begin with, I tried the following command.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ echo strange | sed s/'[a-e]'/#/g
str#ng#
</code></pre>
</div>

<p>After that, I know that surrounding the whole <code class="highlighter-rouge">s</code> command <em>isn’t</em> a
must, just the <code class="highlighter-rouge">regex</code> and <code class="highlighter-rouge">replacement</code> will do.</p>

<p>Then I replaced all <code class="highlighter-rouge">/</code> with <code class="highlighter-rouge">y</code> in the above command.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ echo strange | sed sy'[a-e]'y#yg
str#ng#
</code></pre>
</div>

<p>Now, it’s clear that the custom delimiter in the <code class="highlighter-rouge">s</code> command <em>doesn’t</em>
need to be escaped.</p>

<h3 id="towards-the-goal">Towards the goal</h3>

<p>The goal in this post is to use bizarre characters as the delimiter in
the <code class="highlighter-rouge">s</code> command, and I believe that if you’ve reached here, you’ll
probably understand what <a href="https://stackoverflow.com/a/4844945">this command</a> is doing, provided
that you know the way to
<a href="https://stackoverflow.com/a/10571642">input control characters as arguments in bash commands</a>.</p>

<h2 id="more-examples">More examples</h2>

<p>I’ve just tried to delete a <code class="highlighter-rouge">&lt;script&gt;</code> tag in the <code class="highlighter-rouge">master</code> branch of a
repository for <a href="https://vincenttam.github.io/SampleWebPage/ex0.html">my sample W3CSS page</a> using the in-place
editing option of <code class="highlighter-rouge">sed</code>.  Before making <em>real</em> changes to the file, I
tested my command syntax with the standard output first.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>[owner@localhost ~/SampleWebPage]$ git branch -a
* master
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/gh-pages
  remotes/origin/master
[owner@localhost ~/SampleWebPage]$ sed -nr '\#&lt;scr#,#&lt;/scr#p' ex0.html
sed: -e expression #1, char 9: unexpected `,'
</code></pre>
</div>

<p>Looking at <a href="https://www.gnu.org/software/sed/manual/html_node/Addresses.html#Addresses">the manual</a> <em>again</em>, I thought that <code class="highlighter-rouge">\%regex%</code>
represented <em>one</em> address only.  The pattern after the comma was
<em>another</em> address, so I should have used <em>two</em> backslashes in the last
command.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>[owner@localhost ~/SampleWebPage]$ sed -ir '\#&lt;scr#,\#&lt;/scr#' ex0.html
</code></pre>
</div>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/23/find-files-for-vim-to-edit-in-bash/">Find Files For Vim to Edit in Bash</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/23/find-files-for-vim-to-edit-in-bash/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/23/find-files-for-vim-to-edit-in-bash/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/23/find-files-for-vim-to-edit-in-bash/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>

<p>Since copying and pasting the output of a command can be a tedious
job.  For example, if you want to create your blog using a framework,
you may first logon to your <a href="https://github.com">GitHub</a> account and create an <em>empty</em>
repository there, then <code class="highlighter-rouge">git clone</code> <a href="http://octopress.org">Octopress</a>/<a href="http://jekyllbootstrap.com">Jekyll-Bootstrap</a> from
GitHub, reset the <code class="highlighter-rouge">origin</code> <abbr title="Uniform Resource Locator">URL</abbr>, and input the new <abbr title="Uniform Resource Locator">URL</abbr> based on the old
one.</p>

<p>After having created a repository online, you will see the <abbr title="Uniform Resource Locator">URL</abbr> of the
repository using the <abbr title="Secure SHell">SSH</abbr> protocol.  If one <em>doesn’t</em> want to repeat
the start of the <abbr title="Uniform Resource Locator">URL</abbr> <code class="highlighter-rouge">git@github.com:</code>, one may use the bash commands
introduced in <a href="/blog/2015/08/22/used-more-bash-utilities/">the previous post</a> to extract its useful parts for
the <code class="highlighter-rouge">sed</code> substitution.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ git remote -v
octopress	git@github.com:imathis/octopress.git (fetch)
octopress	git@github.com:imathis/octopress.git (push)
origin	git@github.com:VincentTam/vincenttam.github.io.git (fetch)
origin	git@github.com:VincentTam/vincenttam.github.io.git (push)
$ name=userName; repo=repoName
$ git remote -v | sed -n '3{p;q}' | awk '{print $2}' | sed -r \
"s;(\w*)/(.*).git;$name/$repo.git;"
$ unset name repo
</code></pre>
</div>

<h2 id="problem">Problem</h2>

<p>I tried extracting a list of Markdown files containing a particular
word and passing them to <a href="http://www.vim.org">Vim</a> as arguments using <code class="highlighter-rouge">find</code>, <code class="highlighter-rouge">grep</code> and
<code class="highlighter-rouge">xargs</code>.  Unluckily, I got an error.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ find source/_posts/ -name "*.markdown" -exec grep -q ^tag {} \; \
&gt; -print | xargs vi
Vim: Warning: Input is not from a terminal
3 files to edit
$ 
</code></pre>
</div>

<p>Note: <em>Without</em> the <code class="highlighter-rouge">-print</code> flag, the above command <em>won’t</em> work.</p>

<!-- more -->

<h2 id="solution">Solution</h2>

<p>As a result, I searched “vim warning input is not from a terminal
xargs” on Google, and found <a href="http://superuser.com/q/336016">this question</a> very useful.  I
should have wrapped the <code class="highlighter-rouge">find</code> command like <code class="highlighter-rouge">$(find ...)</code>.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ vi $(find source/_posts/ -name "*.markdown" -exec \
&gt; grep -q ^tag {} \; -print | xargs)
3 files to edit
</code></pre>
</div>

<h2 id="facts-learnt">Facts learnt</h2>

<h3 id="sed">sed</h3>
<ul>
  <li><code class="highlighter-rouge">3{p;q}</code>: quit after printing the third line for the sake of
  efficiency</li>
  <li><code class="highlighter-rouge">-r</code>: use extended regular expression to save the trouble of
  escaping <code class="highlighter-rouge">()</code> for submatches.</li>
  <li><code class="highlighter-rouge">-n</code>: suppress standard output.</li>
  <li>Enclose the expression
    <ul>
      <li>with <em>single</em> quotes to <em>disable</em> interpretation of bash
  variables</li>
      <li>with <em>double</em> quotes to <em>enable</em> interpretation of bash
  variables.</li>
    </ul>
  </li>
  <li>One can replace the delimiter <code class="highlighter-rouge">/</code> in the expression
  <code class="highlighter-rouge">s/{pat}/{repl}/</code> by any one character from <code class="highlighter-rouge">_;#| </code>.</li>
  <li>Specify a custom delimiter like <code class="highlighter-rouge">\%.%s%foo%bar%</code>.  (The
  variable/range <code class="highlighter-rouge">.</code> is <em>needed</em>.)</li>
</ul>

<h3 id="bash">bash</h3>

<ul>
  <li>Set variables using <code class="highlighter-rouge">var1=value1;var2=value2;...</code></li>
  <li>Unset variable usign <code class="highlighter-rouge">unset var1 var2 ...</code></li>
</ul>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/22/used-more-bash-utilities/">Used More Bash Utilities</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/22/used-more-bash-utilities/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/22/used-more-bash-utilities/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/22/used-more-bash-utilities/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>

<p>Same as what has been written in my older post
<a href="/blog/2014/12/12/using-xclip/"><em>Using Xclip</em></a>.</p>

<h2 id="drawback">Drawback</h2>

<p>Inputing the keyboard command for the paste action is, in my opinion,
<em>laborious</em>.</p>

<h2 id="tools-used">Tools used</h2>

<ol>
  <li><code class="highlighter-rouge">find</code></li>
  <li><code class="highlighter-rouge">grep</code></li>
  <li><code class="highlighter-rouge">sed</code></li>
  <li><code class="highlighter-rouge">awk</code></li>
  <li><code class="highlighter-rouge">xargs</code></li>
</ol>

<!-- more -->

<h3 id="the-find-command">The find command</h3>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>find . -path ./dir -prune -o -name '*.txt' -type f -print
find ./foo -exec wc {} \;
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">-path ./dir -prune -o</code>: exclude the directory <code class="highlighter-rouge">./dir</code></li>
  <li><code class="highlighter-rouge">-name '*.txt'</code>: match the name of the file</li>
  <li><code class="highlighter-rouge">-type f</code>: match files only, not directories</li>
  <li><code class="highlighter-rouge">-print</code>: print all matched paths</li>
  <li><code class="highlighter-rouge">-exec {cmd} {} \;</code>
    <ul>
      <li>execute <em>one single</em> command <code class="highlighter-rouge"><span class="p">{</span><span class="err">cmd</span><span class="p">}</span></code>, no pipes are allowed</li>
      <li><code class="highlighter-rouge"><span class="p">{}</span></code>: an instance of matched path</li>
      <li><code class="highlighter-rouge">\;</code>: terminator</li>
    </ul>
  </li>
</ul>

<p>I’ve found that if <code class="highlighter-rouge">-type f</code> goes <em>before</em> <code class="highlighter-rouge">-path ./dir -prune -o</code>,
the path <code class="highlighter-rouge">./dir</code> <em>won’t</em> be excluded.  <strong>Don’t use <code class="highlighter-rouge">./</code>, use <code class="highlighter-rouge">.</code>!</strong> on
Mac.</p>

<p>Using <code class="highlighter-rouge">-not -path ./dir</code> option <em>doesn’t</em> work.</p>

<h3 id="the-grep-command">The grep command</h3>

<ul>
  <li><code class="highlighter-rouge">-I</code>: ignore binary files</li>
  <li><code class="highlighter-rouge">-q . {}</code>: match any characters and suppress output for faster
  execution</li>
</ul>

<h3 id="the-sed-command">The sed command</h3>

<ul>
  <li><code class="highlighter-rouge">-i .bak</code>: edit file with backup extension <code class="highlighter-rouge">.bak</code> (Mac only, not in
  *nix)</li>
  <li><code class="highlighter-rouge">-i ''</code>: no backup (Also Mac only)</li>
  <li><code class="highlighter-rouge">sed 'p;s/foo/bar/'</code>: print original and replaced strings, separated
by newline.</li>
</ul>

<h3 id="the-awk-command">The awk command</h3>

<p>The command <code class="highlighter-rouge">awk '{ print $2 }'</code> extracts the second column.  For more
examples, see <a href="http://www.hcs.harvard.edu/~dholland/computers/awk.html">the simple awk tutorial</a>.</p>

<h3 id="the-xargs-command">The xargs command</h3>

<p>This is a very powerful command when combined with <code class="highlighter-rouge">find</code>.  This
utility reads from <code class="highlighter-rouge">stdin</code> and echos it.</p>

<ul>
  <li>no flags: all output joined into a single line</li>
  <li><code class="highlighter-rouge">-n3</code>: 3 space-delimited stdin in each line</li>
  <li><code class="highlighter-rouge">xargs -n2 {cmd}</code>: execute <code class="highlighter-rouge"><span class="p">{</span><span class="err">cmd</span><span class="p">}</span><span class="w"> </span><span class="p">{</span><span class="err">arg1</span><span class="p">}</span><span class="w"> </span><span class="p">{</span><span class="err">arg2</span><span class="p">}</span></code>, …, <code class="highlighter-rouge"><span class="p">{</span><span class="err">cmd</span><span class="p">}</span><span class="w">
  </span><span class="p">{</span><span class="err">arg2n-1</span><span class="p">}</span><span class="w"> </span><span class="p">{</span><span class="err">arg2n</span><span class="p">}</span></code>.</li>
</ul>

<h3 id="putting-things-together">Putting things together</h3>

<p>Here’s some sample commands.</p>

<h4 id="find-and-replace-for-all-text-files-under-a-path">Find and replace for all text files under a path</h4>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>find . -path ./.git -prune -o -type f -exec grep -Iq . {} \; -and \
-exec sed -i 's/foo/bar/g' {} \;
</code></pre>
</div>

<p>Ignore the <code class="highlighter-rouge">.git</code> folder, which is the Git repository, to avoid
damaging it.</p>

<h4 id="find-and-replace-substrings-in-path-names">Find and replace substrings in path names</h4>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>find . -path ./.git -prune -o -name "*foo*" -print | sed \
'p;s/foo/bar/g' | xargs -n2 mv
</code></pre>
</div>

<p>All instances of <code class="highlighter-rouge">foo</code> in path names are replaced with <code class="highlighter-rouge">bar</code>.  Note
that that <code class="highlighter-rouge">-print</code> option <em>should be included</em>.  Otherwise, the path
<code class="highlighter-rouge">./.git</code> which is intended to be omitted will appear in the piped
output and processed by <code class="highlighter-rouge">sed</code>, and then the terminal will throw the
follow error message.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>fatal: can not move directory into itself, source=.git, destination=.git/.git
</code></pre>
</div>

<h4 id="find-and-replace-git-remote-paths">Find and replace Git remote paths</h4>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ git remote -v | awk '{ print $2 }' | head -1 | \
xargs git remote set-url origin
$ git remote -v
origin	https://github.com/VincentTam/StudentList1.git (fetch)
origin	https://github.com/VincentTam/StudentList1.git (push)
$ git remote -v | awk '{ print $2 }' | head -1 | sed \
's/StudentList1/StudentList4/' | xargs git remote set-url origin
$ git remote -v
origin	https://github.com/VincentTam/StudentList4.git (fetch)
origin	https://github.com/VincentTam/StudentList4.git (push)
</code></pre>
</div>

<hr />
<p>(ADDED ON DEC 26TH, 2015)</p>

<h4 id="the-highlighting-of-grep-after-find">The highlighting of grep after find</h4>

<p>In Gnome Terminal, the <code class="highlighter-rouge">grep</code> command alone highlights the matched
text in red by default.  However, if it’s placed after <code class="highlighter-rouge">find ...
-exec</code>, then the highlighting will be <em>disabled</em>.  In order to enable
it again, add the option <code class="highlighter-rouge">--color=auto</code> to <code class="highlighter-rouge">grep</code>.</p>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/13/upgrade-to-java-8-on-ubuntu-14-dot-04/">Upgrade to Java 8 on Ubuntu 14.04</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/13/upgrade-to-java-8-on-ubuntu-14-dot-04/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/13/upgrade-to-java-8-on-ubuntu-14-dot-04/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/13/upgrade-to-java-8-on-ubuntu-14-dot-04/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>

<p>Before writing <a href="/blog/2015/08/12/debug-apps-on-real-devices-in-android-studio/">the previous post</a>, I had noticed that the version
number of the current stable release of Java is 1.8 update 51.</p>

<h2 id="method">Method</h2>

<ol>
  <li>Google “ubuntu 14.04 java 8”.</li>
  <li>Click on <a href="http://tecadmin.net/install-oracle-java-8-jdk-8-ubuntu-via-ppa/">the first search result</a>.</li>
  <li>
    <p>Follow the instructions there.</p>

    <p>Note that the command in the section “Configuring Java
 Environment” should be run <em>before</em> the one in “Verify Installed
 Java Version”.<sup id="fnref:result"><a href="#fn:result" class="footnote">1</a></sup></p>
  </li>
</ol>

<h2 id="lessons-learnt">Lessons learnt</h2>

<p><a href="https://www.linuxquestions.org/questions/programming-9/convert-file-from-utf8-to-ascii-encoding-458839/">The encoding of files can be converted</a> using <code class="highlighter-rouge">iconv</code>.</p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:result">
      <p>You may see <a href="/downloads/code/term.html">the results from the terminal</a>.&nbsp;<a href="#fnref:result" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/12/debug-apps-on-real-devices-in-android-studio/">Debug Apps on Real Devices in Android Studio</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/12/debug-apps-on-real-devices-in-android-studio/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/12/debug-apps-on-real-devices-in-android-studio/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/12/debug-apps-on-real-devices-in-android-studio/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><p>After spending hours to find out that I need to tap on “Settings” →
“About” → … → “Build number” for enabling USB debugging in the
“Developers options” on an Android phone, I plugged the phone into a
Mac desktop, but it <em>didn’t</em> show up in the “Devices” in Finder.  I
thought that Mac <em>couldn’t</em> detect the phone, and I searched Google
for a long time.  After having seen the name of an application for
synchronising data between and phone and the computer for a few times,
I finally decided to download it since I <em>didn’t</em> know what else to
do.  Luckily, my app could be run on the phone with the help of
Android Studio installed on the Mac desktop.</p>

<p><span class="tex2jax_ignore">
An hour later, I tried to setup the development environment on an M$
Win* computer.  Its installed size is over 20GB!  After hours of
installation work, I was <em>stuck</em> again on M$ Win*:  unlike the Mac
computer, that M$ Win* machine could detect the Android mobile
device and show it in “Computer” within a minute.  I added the
following lines into <code class="highlighter-rouge">/{AppName}/app/build.gradle</code> according to
<a href="https://developer.android.com/tools/device.html#setting-up">a page of the official website</a>.
</span></p>

<figure class="code-highlight-figure"><figcaption class="code-highlight-caption"><span class="code-highlight-caption-title">To enable debugging on a real Android device</span></figcaption><div class="code-highlight"><pre class="code-highlight-pre"><div data-line="1" class="code-highlight-row numbered"><div class="code-highlight-line"><span class="n">android</span> <span class="o">&#x7b;</span>
</div></div><div data-line="2" class="code-highlight-row numbered"><div class="code-highlight-line">    <span class="n">buildTypes</span> <span class="o">&#x7b;</span>
</div></div><div data-line="3" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="n">debug</span> <span class="o">&#x7b;</span>
</div></div><div data-line="4" class="code-highlight-row numbered"><div class="code-highlight-line">            <span class="n">debuggable</span> <span class="kc">true</span>
</div></div><div data-line="5" class="code-highlight-row numbered"><div class="code-highlight-line">        <span class="o">&#x7d;</span></div></div></pre></div></figure>

<p>However, the IDE said that <em>no debuggable device</em> could be found.  I
guessed that the synchronising application made by the manufacturer of
the phone was the cause of that undesirable result.  After fetching
the application from the website of the phone manufacturer and
restarting Android Studio, I could finally run the same application on
a real Android device by clicking the little triangle on the top.</p>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/11/git-object-id-generation-5-predict-id/">Git Object ID Generation (5): Predict ID</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/11/git-object-id-generation-5-predict-id/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/11/git-object-id-generation-5-predict-id/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/11/git-object-id-generation-5-predict-id/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="goal">Goal</h2>

<p>The method for getting the Git object ID described in
<a href="/blog/2015/08/07/git-object-id-generation-4-general-trees/">previous post in this series</a> <em>isn’t</em> quick enough since it
consists of <em>several</em> commands.</p>

<h2 id="the-one-line-command">The one-line command</h2>

<h3 id="objects-with-known-git-id">Objects with known Git ID</h3>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ (printf "{obj_type} $(git cat-file -s {hash})\0" &amp;&amp; git cat-file {obj_type} {h
ash}) | shasum
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge"><span class="p">{</span><span class="err">obj_type</span><span class="p">}</span></code> can be <code class="highlighter-rouge">blob</code>, <code class="highlighter-rouge">tree</code>, <code class="highlighter-rouge">commit</code> or <code class="highlighter-rouge">tag</code>.</li>
  <li><code class="highlighter-rouge"><span class="p">{</span><span class="err">hash</span><span class="p">}</span></code> is the SHA-1 hash of the object.</li>
</ul>

<p>Then the output SHA-1 hash should be the <em>same</em> as the input <code class="highlighter-rouge"><span class="p">{</span><span class="err">hash</span><span class="p">}</span></code>.</p>

<h3 id="predict-git-object-ids">Predict Git object IDs</h3>
<p>Hence, we can modify the above command to predict the Git object ID of
a <code class="highlighter-rouge"><span class="p">{</span><span class="err">file</span><span class="p">}</span></code>.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ (printf "{obj_type} $(wc -c {file} | tr -dc '0-9')\0" &amp;&amp; cat {file}) | shasum
</code></pre>
</div>

<p>In order to verify the result for files, one can quickly get the blob
ID from Git by <code class="highlighter-rouge">git log -1 -p -- {file}</code>.</p>

<h2 id="facts-learnt">Facts learnt</h2>

<h3 id="extract-numbers-from-a-string-in-bash">Extract numbers from a string in bash</h3>

<p>I typed “linux extract number” on Google, and the autocompletion gave
me “from string”.  I finally saw two commands for doing this.</p>

<ol>
  <li><code class="highlighter-rouge">sed 's/[^0-9]//g'</code></li>
  <li><code class="highlighter-rouge">tr -dc '0-9'</code></li>
</ol>

<p>In my opinion, the later is simpler.  The <code class="highlighter-rouge">-c</code> flag takes the
complement of the characters marked by <code class="highlighter-rouge">-d</code>.</p>

<h3 id="using-cat-on-m-win">Using cat on M$ Win*</h3>

<p>Using the command in the section “Predict Git object IDs” gives users
a <em>wrong</em> SHA-1 sum.  The reason is that M$ Win* uses <code class="highlighter-rouge">\r\n</code> instead
of <code class="highlighter-rouge">\n</code> for starting newlines.  This also results in the <em>incorrect</em>
byte count of the files with <code class="highlighter-rouge">\r\n</code> as the line terminator in that
command.  Thus, the extra <code class="highlighter-rouge">\r</code> needs to be deleted with <code class="highlighter-rouge">tr -d '\r'</code>.</p>

<h3 id="using-git-for-win">Using Git for Win*</h3>

<p>For the installed version of Git on M$ Win*, one needs to use
<code class="highlighter-rouge">sha1sum</code> instead of <code class="highlighter-rouge">shasum</code>.  Otherwise, Git Bash will complain that
it is “Unable to find Digest::SHA or Digest::SHA::PurePerl”.</p>

<h3 id="using-gitportable-on-m-win">Using GitPortable on M$ Win*</h3>

<p>Since one <em>can’t</em> even issue the command <code class="highlighter-rouge">sha1sum</code>, use <code class="highlighter-rouge">openssl sha1</code>
instead.  (Omitting the trailing <code class="highlighter-rouge">1</code> will result in a <em>very different</em>
hexadecimal number.)</p>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/07/git-object-id-generation-4-general-trees/">Git Object ID Generation (4): General Trees</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/07/git-object-id-generation-4-general-trees/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/07/git-object-id-generation-4-general-trees/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/07/git-object-id-generation-4-general-trees/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>

<p>After I’ve written <a href="/blog/2015/08/07/git-object-id-generation-3-trees-with-multiple-blobs/">the third post</a> in this series, I believed
that I could generate the SHA-1 hash of <em>all</em> Git objects.</p>

<h2 id="problem">Problem</h2>

<p>In order to understand the object ID of an arbitrary tree object, it
is necessary that I create a file in a sub-folder.  Suppose that I
copied the file <code class="highlighter-rouge">hello.txt</code> to the sub-directory <code class="highlighter-rouge">subdir</code> in the
directory <code class="highlighter-rouge">hello</code> in <a href="/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/">the second post</a>  In short, I just
followed the steps in Chapter 4 of <em>Version Control with Git</em>.  I
include the setup here for convenience.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ mkdir hello &amp;&amp; cd hello
$ git init
$ echo "hello world" &gt; hello.txt
$ git add hello.txt
$ git write-tree
68aba62e560c0ebc3396e8ae9335232cd93a3f60
$ mkdir subdir
$ cp hello.txt subdir
$ git add subdir/hello.txt
$ git write-tree
492413269336d21fac079d4a4672e55d5d2147ac
$ git cat-file -p 492413269336d21fac079d4a4672e55d5d2147ac
100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad	hello.txt
040000 tree 68aba62e560c0ebc3396e8ae9335232cd93a3f60	subdir
</code></pre>
</div>

<p>After having successfully generated the SHA-1 hash for the tree object
<code class="highlighter-rouge">68aba62e560c0ebc3396e8ae9335232cd93a3f60</code> in <a href="/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/">the second post</a>
in this series, I tried the same task for another tree object
<code class="highlighter-rouge">492413269336d21fac079d4a4672e55d5d2147ac</code>.  Using the <em>same</em>
technique describe in <a href="/blog/2015/08/07/git-object-id-generation-3-trees-with-multiple-blobs/">the previous post</a>, I got another
<em>wrong</em> SHA-1 hash <code class="highlighter-rouge">06eb95bda67a8f86e65bb1590744f10a61eeccef</code>.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code># Note: I *didn't* type enter in the following command.  Just keep typing.
$ printf "tree 71\x00100644 hello.txt\x00\x3b\x18\xe5\x12\xdb\xa7\x9e\x4c\x83\x0
0\xdd\x08\xae\xb3\x7f\x8e\x72\x8b\x8d\xad040000 subdir\x00\x68\xab\xa6\x2e\x56\x
0c\x0e\xbc\x33\x96\xe8\xae\x93\x35\x23\x2c\xd9\x3a\x3f\x60"
06eb95bda67a8f86e65bb1590744f10a61eeccef  -
</code></pre>
</div>

<p><em>How to get the <strong>right object ID</strong></em>?</p>

<!-- more -->

<h2 id="cause-of-error">Cause of error</h2>

<p>I realised that I had misunderstood the structure of a tree object
again after reading the first Google search result of “git tree object
format”.  It’s a Stack Overflow question on the “format of Git tree
object”.  I read the largest code block of
<a href="http://stackoverflow.com/a/21599232">the first answer</a>, and find out that <em>the leftmost zero
digit in</em> <code class="highlighter-rouge">040000</code> <em>should be taken away</em>.</p>

<h2 id="a-primitive-method">A primitive method</h2>

<h3 id="get-the-object-size-with-the-wc-command">Get the object size with the wc command</h3>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ printf "100644 hello.txt\x00\x3b\x18\xe5\x12\xdb\xa7\x9e\x4c\x83\x00\xdd\x08\x
ae\xb3\x7f\x8e\x72\x8b\x8d\xad40000 subdir\x00\x68\xab\xa6\x2e\x56\x0c\x0e\xbc\x
33\x96\xe8\xae\x93\x35\x23\x2c\xd9\x3a\x3f\x60" | wc -c
70
</code></pre>
</div>

<h3 id="sha-1-hash">SHA-1 hash</h3>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ printf "tree 70\x00100644 hello.txt\x00\x3b\x18\xe5\x12\xdb\xa7\x9e\x4c\x83\x0
0\xdd\x08\xae\xb3\x7f\x8e\x72\x8b\x8d\xad40000 subdir\x00\x68\xab\xa6\x2e\x56\x0
c\x0e\xbc\x33\x96\xe8\xae\x93\x35\x23\x2c\xd9\x3a\x3f\x60" | shasum
492413269336d21fac079d4a4672e55d5d2147ac  -
</code></pre>
</div>

<h2 id="a-more-time-saving-method">A more time-saving method</h2>

<p>The above <code class="highlighter-rouge">printf</code> command is error-prone.  Here’re some less
laborious commands.</p>

<h3 id="understand-the-tree-object">Understand the tree object</h3>

<p>While searching for the cause of error, I jumped through many web
pages, and I went back to
<a href="http://stackoverflow.com/a/13977017">the Stack Overflow question stated in the second post</a>
in this series.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ git cat-file tree 492413269336d21fac079d4a4672e55d5d2147ac | od -c
0000000   1   0   0   6   4   4       h   e   l   l   o   .   t   x   t
0000020  \0   ; 030 345 022 333 247 236   L 203  \0 335  \b 256 263 177
0000040 216   r 213 215 255   4   0   0   0   0       s   u   b   d   i
0000060   r  \0   h 253 246   .   V  \f 016 274   3 226 350 256 223   5
0000100   #   , 331   :   ?   `
0000106
</code></pre>
</div>

<ul>
  <li>The <code class="highlighter-rouge">c</code> flag: show the input as characters if possible, otherwise as
  octal 1-byte units.</li>
  <li>The <code class="highlighter-rouge">b</code> flag: show the input as octal 1-byte units.</li>
</ul>

<p>Note that the number of bytes can be found at the bottom left hand
corner.  This is actually the object size of the tree object
<code class="highlighter-rouge">492413269336d21fac079d4a4672e55d5d2147ac</code>.</p>

<p>One can capture the binary output and dump it to <code class="highlighter-rouge">od</code> with one
command.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ git cat-file tree 4924132 | tee test.txt | od -c
</code></pre>
</div>

<h3 id="an-improved-printf-command">An improved printf command</h3>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ printf "tree 70\0" &gt; len.txt
$ cat len.txt test.txt | shasum
492413269336d21fac079d4a4672e55d5d2147ac  -
</code></pre>
</div>

<p>We finally get the target object ID in three steps.</p>

<h2 id="facts-learnt">Facts learnt</h2>

<h3 id="another-use-of-git-cat-file">Another use of git cat-file</h3>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ git cat-file -s 492413269336d21fac079d4a4672e55d5d2147ac
70
</code></pre>
</div>

<ul>
  <li>The <code class="highlighter-rouge">-s</code> flag: size</li>
  <li>The <code class="highlighter-rouge">-p</code> flag: pretty-print</li>
</ul>

<p>From the word “pretty” in the man page for <code class="highlighter-rouge">git-cat-file</code>, I
understand why I had misunderstood the structure of Git tree objects.</p>

<h3 id="use-od-like-hd">Use od like hd</h3>

<p>From a comment to the second answer to
<a href="http://stackoverflow.com/a/21599232">the Stack Overflow question</a> about the “format of git
tree object”, I saw the word <code class="highlighter-rouge">hexdump</code>, and I viewed its man page.  At
first, I <em>didn’t</em> know their difference, so I googled “od vs hexdump”,
and then I saw the abbreviation <code class="highlighter-rouge">hd</code> for <code class="highlighter-rouge">hexdump</code>, so I changed the
search query string to “hd vs od”, but found out that their functions
are basically the <em>same</em>, but their display is <em>different</em> by default.
I like the default display of <code class="highlighter-rouge">hd</code>.  To use <code class="highlighter-rouge">od</code> like <code class="highlighter-rouge">hd</code>, one only
needs to copy the command from the man page of <code class="highlighter-rouge">od</code>.</p>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/07/git-object-id-generation-3-trees-with-multiple-blobs/">Git Object ID Generation (3): Trees with Multiple Blobs</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/07/git-object-id-generation-3-trees-with-multiple-blobs/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/07/git-object-id-generation-3-trees-with-multiple-blobs/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/07/git-object-id-generation-3-trees-with-multiple-blobs/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>

<p>Having written <a href="/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/">the second post</a> in this series, I thought that
I understood how to compute the SHA-1 hash of Git tree objects.</p>

<h2 id="problem">Problem</h2>

<p>Suppose that I add a file named <code class="highlighter-rouge">rose</code> which consisted merely of the
word <code class="highlighter-rouge">sweet</code> and a line terminator to the folder <code class="highlighter-rouge">hello</code> in
<a href="/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/">the second post</a> in this series.  I include the setup here for
convenience.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>$ mkdir hello &amp;&amp; cd hello
$ git init
$ echo "hello world" &gt; hello.txt
$ git add hello.txt
$ git write-tree
68aba62e560c0ebc3396e8ae9335232cd93a3f60
$ echo "sweet" &gt; rose
$ git add rose
$ git write-tree
b12767ff2f8a8160bca15abfb775bca5ba31ccf1
$ git cat-file -p b12767ff2f8a8160bca15abfb775bca5ba31ccf1 | tee test.txt
100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad    hello.txt
100644 blob aa823728ea7d592acc69b36875a482cdf3fd5c8d    rose
</code></pre>
</div>

<p>Therefore, our target hash is
<code class="highlighter-rouge">b12767ff2f8a8160bca15abfb775bca5ba31ccf1</code>.</p>

<p>Just like what I’d done in the previous post, I manually changed the
hashes into a <code class="highlighter-rouge">printf</code> command that writes out the binary value of the
hashes.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code># Note: I *didn't* type enter in the following command.  Just keep typing.
$ printf "tree 70\x00100644 hello.txt\x00\x3b\x18\xe5\x12\xdb\xa7\x9e\x4c\x83\x0
0\xdd\x08\xae\xb3\x7f\x8e\x72\x8b\x8d\xad\n100644 rose\x00\xaa\x82\x37\x28\xea\x
7d\x59\x2a\xcc\x69\xb3\x68\x75\xa4\x82\xcd\xf3\xfd\x5c\x8d" | shasum
a4b430f9da3e22c0854fb26c97da77db271e5acf  -
</code></pre>
</div>

<p>What I got is <code class="highlighter-rouge">a4b430f9da3e22c0854fb26c97da77db271e5acf</code>, which is
<em>different</em> from the target.  <em>How can I get back <strong>the right SHA-1
hash</strong>?</em></p>

<!-- more -->

<h2 id="method">Method</h2>

<p>I read domegetter’s comment on <a href="https://gist.github.com/masak/2415865">this Gist</a>, and removed the
newline character <code class="highlighter-rouge">\n</code> in the middle of the quoted string in the above
<code class="highlighter-rouge">printf</code> command.  Then I decreased the object size by one since a
character had been taken out.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code># Note: I *didn't* type enter in the following command.  Just keep typing.
$ printf "tree 69\x00100644 hello.txt\x00\x3b\x18\xe5\x12\xdb\xa7\x9e\x4c\x83\x0
0\xdd\x08\xae\xb3\x7f\x8e\x72\x8b\x8d\xad100644 rose\x00\xaa\x82\x37\x28\xea\x7d
\x59\x2a\xcc\x69\xb3\x68\x75\xa4\x82\xcd\xf3\xfd\x5c\x8d" | shasum
b12767ff2f8a8160bca15abfb775bca5ba31ccf1  -
</code></pre>
</div>

<p>We’re done!</p>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/">Git Object ID Generation (2): Trees with One Single Blob</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/07/git-object-id-generation-2-trees-with-one-single-blob/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="background">Background</h2>

<p>In <a href="/blog/2015/08/07/git-object-id-generation-1-blobs-and-commits/">the first post</a> in this series, I’ve claimed that the
generation of object IDs in Git is the SHA-1 hash of the string</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;object type name&gt; SP &lt;len&gt; NUL &lt;data&gt;
</code></pre>
</div>

<p>,where</p>

<ul>
  <li><code class="highlighter-rouge">&lt;data&gt;</code> stands for the output of <code class="highlighter-rouge">git cat-file -p {hash}</code></li>
  <li><code class="highlighter-rouge">&lt;len&gt;</code> means the length of <code class="highlighter-rouge">&lt;data&gt;</code>.  It can be measured with the
  command <code class="highlighter-rouge">wc -c</code>.</li>
</ul>

<h2 id="problem">Problem</h2>

<p>To verify my claim, I followed the steps in Chapter 4 of <em>Version
Control with Git</em>.</p>

<ol>
  <li>Create a folder named <code class="highlighter-rouge">hello</code> and go to that directory.</li>
  <li>Initialise an empty Git repository.</li>
  <li>Create the file <code class="highlighter-rouge">hello.txt</code> with one single line “hello world”.</li>
  <li>Add the file to Git’s object storage.</li>
  <li>Get a tree object from the index.</li>
  <li>Capture the contents of the tree object in <code class="highlighter-rouge">test.txt</code>.</li>
  <li>Count the number of bytes in <code class="highlighter-rouge">test.txt</code>.</li>
  <li>
    <p>Create the file <code class="highlighter-rouge">len.txt</code> consisting of</p>

    <div class="cliUB highlighter-rouge"><pre class="highlight"><code> "tree" SP &lt;result in item 6&gt; NUL
</code></pre>
    </div>

    <p><em>without</em> the line terminator.</p>
  </li>
  <li>Concatenate the contents of the files <code class="highlighter-rouge">len.txt</code> and <code class="highlighter-rouge">test.txt</code> and
compute its SHA-1 hash.</li>
</ol>

<pre class="cliUB"><code>$ mkdir hello &amp;&amp; cd hello
$ git init
$ echo "hello world" &gt; hello.txt
$ git add hello.txt
$ git write-tree
<span class="UBHLCode">68aba62e560c0ebc3396e8ae9335232cd93a3f60</span>
$ git cat-file -p 68aba62e560c0ebc3396e8ae9335232cd93a3f60 | tee test.txt
<span class="UBHLCode">100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad	hello.txt</span>
$ wc -c test.txt
63 test.txt
$ printf "tree 63\0" &gt; len.txt
$ cat len.txt test.txt | shasum
<span class="err">10bd0f0350027c25edc4ce72aba60e641f55596d  -</span>
</code></pre>

<p>As can be seen above, I’ve <span class="err">a wrong SHA-1
hash</span>.  <em>How can I get back <strong>the right SHA-1 hash</strong>?</em></p>

<!-- more -->

<h2 id="method">Method</h2>

<p>I googled “git tree hash id”, and I found the chosen answer of
<a href="http://stackoverflow.com/a/13977017">this Stack Overflow question</a> very explanative.  One may
shorten the included command by replacing <code class="highlighter-rouge">echo -en</code> with <code class="highlighter-rouge">printf</code>.</p>

<h3 id="get-the-object-size-right">Get the object size right</h3>

<p>In this case, the object size of the tree
<code class="highlighter-rouge">68aba62e560c0ebc3396e8ae9335232cd93a3f60</code> containg the blob
<code class="highlighter-rouge">3b18e512dba79e4c8300dd08aeb37f8e728b8dad</code> which corresponds to the
file <code class="highlighter-rouge">hello.txt</code> should be 37 (= 6 + 1 + 9 + 1 + 20).</p>

<h3 id="get-the-object-content-right">Get the object content right</h3>

<p>As the blob ID is stored as binary value, I copied it and pasted it
Vim so that I could easily insert <code class="highlighter-rouge">\x</code> in front of a pair of hex
digits in the blob ID.  I then put the things together in a command.</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code># Contents of `testing.sh' as seen inside Vim
# Note that there's NO newline character in the following command
printf "tree 37\x00100644 hello.txt\x00\x3b\x18\xe5\x12\xdb\xa7\x9e\x4
c\x83\x00\xdd\x08\xae\xb3\x7f\x8e\x72\x8b\x8d\xad" | shasum
</code></pre>
</div>

<h3 id="result">Result</h3>

<p>By executing the above command, I got <strong>the right SHA-1 hash</strong>:
<code class="highlighter-rouge">68aba62e560c0ebc3396e8ae9335232cd93a3f60</code>.</p>

<h2 id="fact-learnt-formatting-printfs-output">Fact learnt: formatting printf’s output</h2>

<p>In the Stack Overflow question, there’s a command</p>

<div class="cliUB highlighter-rouge"><pre class="highlight"><code>find .git/objects/ -type f -printf "%h%f %s\n"
</code></pre>
</div>

<ul>
  <li>The flag <code class="highlighter-rouge">-type f</code> stands for files.  <em>Without</em> this flag,
  directories like <code class="highlighter-rouge">.git/objects</code> will be displayed.</li>
  <li>The flag <code class="highlighter-rouge">-printf</code> formats the output.
    <ul>
      <li><code class="highlighter-rouge">%h</code> means the head of the file name <em>without</em> the last
  component of the file name.  Thus, it expands to a the path of
  a directory <em>without</em> the trailing <code class="highlighter-rouge">/</code>.</li>
      <li><code class="highlighter-rouge">%f</code> means the last component of the file name.  As a result,
  the <code class="highlighter-rouge">/</code> inside the displayed SHA-1 hashes are taken away.</li>
      <li><code class="highlighter-rouge">%s</code> means the file size</li>
    </ul>
  </li>
</ul>

</div>
    </article>
  
  
    <article>
      <header>
    
      <!-- This defines how Octopress will use posts with external-url. -->
      
	<h1 class="entry-title"><a href="/blog/2015/08/07/how-does-git-commit-amend-work/">How Does Git Commit Amend Work?</a></h1>
      
    
    
      <p class="meta">
        
        
           | <a href="/blog/2015/08/07/how-does-git-commit-amend-work/#disqus_thread/"
             data-disqus-identifier="https://vincenttam.github.io/blog/2015/08/07/how-does-git-commit-amend-work/">Comments</a>
        
	| <a rel="bookmark" href="/blog/2015/08/07/how-does-git-commit-amend-work/" title="Permalink">&infin;</a>
      </p>
    
  </header>


  <div class="entry-content"><h2 id="situation">Situation</h2>

<p>I’ve written and commited the post <a href="/blog/2015/08/06/my-git-command-list-3/"><em>My Git Command List (3)</em></a>,
but after a while, I changed that post.  In order not to complexify
my Git commit history, I used <code class="highlighter-rouge">git commit --amend -a</code>.  That’s quite
simple and convenient.  I observed that the displayed time in the
amended commit was the <em>same</em> as the original one, whereas the SHA-1
hash was <em>changed</em> so that Git knows that they’re <em>different</em>.
However, from
<a href="/blog/2015/08/07/git-object-id-generation-1-blobs-and-commits/"><em>Git Object ID Generation (1): Blobs and Commits</em></a>, I’ve learnt
that the ID of Git commit objects is totally determined by</p>

<ol>
  <li>the content of the commit message</li>
  <li>the commit time</li>
  <li>the author</li>
</ol>

<p>In this case, no difference of the above factors between the original
commit and the amended commit can be observed with <code class="highlighter-rouge">git show</code>.</p>

<h2 id="problem">Problem</h2>

<p><strong>In what way do the original commit and the amended commit differ?</strong></p>

<!-- more -->

<h2 id="difference">Difference</h2>

<p>To solve this problem, I scrolled up the screen and captured the SHA-1
hashes fo the two commits.</p>

<ul>
  <li>the original commit’s hash: <code class="highlighter-rouge">9de8974b93a2e4032b608c0de17ea5ed0c55524b</code></li>
  <li>the amended commit’s hash: <code class="highlighter-rouge">5b7b566b8a07d4813ba9f08a326e169cf38ca20f</code></li>
</ul>

<p>Note: I just <em>make up</em> the email address <code class="highlighter-rouge">demo@example.com</code> to replace
my real email address to <a href="http://www.problogger.net/archives/2008/12/06/10-reasons-to-avoid-mailto-links/">avoid email spams</a>.  Therefore,
<strong>the above commit hashes don’t correspond to the content displayed
below</strong>.  In fact, they correspond to the commits in the Git
repository for this blog.</p>

<pre class="cliUB"><code>$ git cat-file -p 9de8974b93a2e4032b608c0de17ea5ed0c55524b
tree b9f4fb708327e25c8b1b822711ec7dda9c5b2198
parent <a href="https://github.com/VincentTam/vincenttam.github.io/commit/afcb4d97cb447112bd2e930159966d92b8e4754a">afcb4d97cb447112bd2e930159966d92b8e4754a</a>
author Vincent Tam &lt;demo@example.com&gt; 1438859683 +0800
committer Vincent Tam &lt;demo@example.com&gt; <span class="UBHLCode">1438859683</span> +0800

A new post on some Git low level commands

I *don't* go over the details of the book *Pro Git*, which is available
online.  I just select some important ones for quick reference.
$ git cat-file -p 5b7b566b8a07d4813ba9f08a326e169cf38ca20f
tree 2d864bcb7e4944e9d98b663649c79084692873c1
parent <a href="https://github.com/VincentTam/vincenttam.github.io/commit/afcb4d97cb447112bd2e930159966d92b8e4754a">afcb4d97cb447112bd2e930159966d92b8e4754a</a>
author Vincent Tam &lt;demo@example.com&gt; 1438859683 +0800
committer Vincent Tam &lt;demo@example.com&gt; 1438864942 +0800

A new post on some Git low level commands

I *don't* go over the details of the book *Pro Git*, which is available
online.  I just select some important ones for quick reference.</code>
</pre>

<p>Hence, the difference of the timestamp of the <code class="highlighter-rouge">committer</code> causes the
difference in the hashes, whereas the timestamp of the <code class="highlighter-rouge">author</code> is
converted to a human readable date for display.</p>

<h2 id="facts-learnt">Facts learnt</h2>

<h3 id="unix-timestamp">Unix timestamp</h3>

<p>A Unix timestamp is the number of seconds elasped since the start of
the year 1970 in <abbr title="Global Mean Time">GMT</abbr>.</p>

<h3 id="a-little-bit-kramdown-syntax-eob-marker">A little bit kramdown syntax: <abbr title="End-Of-Block">EOB</abbr> marker</h3>

<p>According to kramdown’s syntax guide,
<a href="http://kramdown.gettalong.org/syntax.html#eob-marker">the <abbr title="End-Of-Block">EOB</abbr> marker <em>won’t</em> be found in most Markdown documents</a>.  In
order to include a list followed by a code block that <em>isn’t</em>
contained inside the list, the boundary of the list has to be
specified by a line consisting of a leading ‘^’ character.</p>

</div>
    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/11/">&larr; Older</a>
    
    <a href="/blog/archives/">Blog Archives</a>
    
    <a class="next" href="/posts/9/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me (Brief)</h1>
  <a href="http://stackexchange.com/users/3841408/gnu-supporter">
    <img src="/images/flair.png" width="208" height="58"
    alt="profile for GNU Supporter on Stack Exchange, a network of
    free, community-driven Q&amp;A sites" title="profile for GNU
    Supporter on Stack Exchange, a network of free, community-driven
    Q&amp;A sites" /></a>
  <p><a href="/about/">Here</a>'s a more detailed version.</p>
  <ol>
    <li>A free software supporter</li>
    <li>A GNU/Linux user</li>
    <li>Love text editing in Vim</li>
    <li>Enjoy writing in Markdown</li>
  </ol>
</section>
  

  
    <section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/android/'>Android (1)</a> <a href='/blog/categories/android/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/c-slash-c-plus-plus/'>C/C++ (6)</a> <a href='/blog/categories/c-slash-c-plus-plus/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/css/'>CSS (4)</a> <a href='/blog/categories/css/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/emacs/'>Emacs (1)</a> <a href='/blog/categories/emacs/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/gimp/'>GIMP (2)</a> <a href='/blog/categories/gimp/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/git/'>Git (34)</a> <a href='/blog/categories/git/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/imagemagick/'>ImageMagick (4)</a> <a href='/blog/categories/imagemagick/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/latex/'>LaTeX (28)</a> <a href='/blog/categories/latex/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/latex-suite/'>LaTeX-Suite (7)</a> <a href='/blog/categories/latex-suite/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/linux/'>Linux (56)</a> <a href='/blog/categories/linux/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/m$-win-star/'>M$ Win* (41)</a> <a href='/blog/categories/m$-win-star/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/mathjax/'>MathJax (16)</a> <a href='/blog/categories/mathjax/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/mathjax/'>Mathjax (1)</a> <a href='/blog/categories/mathjax/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/metase/'>MetaSE (2)</a> <a href='/blog/categories/metase/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/octave/'>Octave (4)</a> <a href='/blog/categories/octave/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/octopress/'>Octopress (54)</a> <a href='/blog/categories/octopress/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/perl/'>Perl (2)</a> <a href='/blog/categories/perl/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/ruby/'>Ruby (9)</a> <a href='/blog/categories/ruby/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/sql/'>SQL (2)</a> <a href='/blog/categories/sql/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/svg/'>SVG (8)</a> <a href='/blog/categories/svg/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/ultrablog-dot-vim/'>UltraBlog.vim (7)</a> <a href='/blog/categories/ultrablog-dot-vim/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/vim/'>Vim (41)</a> <a href='/blog/categories/vim/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/blogging/'>blogging (20)</a> <a href='/blog/categories/blogging/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a> <a href='/blog/categories/git/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/hardware/'>hardware (5)</a> <a href='/blog/categories/hardware/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/health/'>health (2)</a> <a href='/blog/categories/health/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/information-security/'>information security (15)</a> <a href='/blog/categories/information-security/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/kramdown/'>kramdown (7)</a> <a href='/blog/categories/kramdown/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (1)</a> <a href='/blog/categories/linux/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/math/'>math (56)</a> <a href='/blog/categories/math/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/metase/'>metase (2)</a> <a href='/blog/categories/metase/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (2)</a> <a href='/blog/categories/octopress/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/online-code-highlighter/'>online code highlighter (9)</a> <a href='/blog/categories/online-code-highlighter/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/pandoc/'>pandoc (4)</a> <a href='/blog/categories/pandoc/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/template/'>template (10)</a> <a href='/blog/categories/template/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>
<li class='category'><a href='/blog/categories/web-technologies/'>web technologies (32)</a> <a href='/blog/categories/web-technologies/atom.xml'><img title = 'Category Atom Feed' src='/images/rss.png' class='nobd' alt='Category Atom Feed' height='15' width ='15'/></a></li>

  </ul>
</section>
  

  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/01/11/ubuntu-on-windows-10-custom-display/">Ubuntu on Windows 10 Custom Display</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/11/windows-10-time-sync-error/">Windows 10 Time Sync Error</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/11/shortened-github-urls-for-this-site/">Shortened GitHub URLs for this Site</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/11/a-quick-markdown-syntax-error-detection-for-writing-mathjax-equations-in-octopress-posts-5/">A Quick Markdown Syntax Error Detection for Writing MathJax Equations in Octopress Posts (5)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/01/10/octopress-config-for-ruby-2-dot-3-on-windows-10/">Octopress Config for Ruby 2.3 on Windows 10</a>
      </li>
    
  </ul>
</section>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" src="/images/CC-BY-SA-icon.png" height="31" width="88"/></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.<br/>
<span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p></footer>
  <script type="text/javascript">
      var disqus_shortname = 'blogueun';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<!-- Defer loading of JavaScripts -->
<script type="text/javascript" charset="utf-8">
(function() {
    function getScript(url,success){
        var script=document.createElement('script');
        script.src=url;
        var head=document.getElementsByTagName('head')[0],
        done=false;
        script.onload=script.onreadystatechange = function(){
        if ( !done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete') ) {
            done=true;
            success();
            script.onload = script.onreadystatechange = null;
            head.removeChild(script);
        }
        };
        head.appendChild(script);
    }

    getScript("/javascripts/modernizr-2.0.js",function() {});
    getScript("https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,https://vincenttam.github.io/javascripts/MathJaxLocal.js",function() {});

    getScript("//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",function(){
      getScript("/javascripts/octopress.js",function() {});
      getScript("/fancybox/source/jquery.fancybox.pack.js?v=2.1.5", function() {
	getScript("/fancybox/source/helpers/all.js", function() {
	  getScript("/javascripts/FancyBoxLocal.js", function() {});
	  });
	});
      });
})();

var cb = function() {
  var h = document.getElementsByTagName('head')[0];

  // Fonts from Google's Web font directory at http://google.com/webfonts
  var font1 = document.createElement("link");
  font1.href = "//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic";
  font1.rel = "stylesheet";
  font1.type = "text/css";
  h.parentNode.insertBefore(font1, h);

  var font2 = document.createElement("link");
  font2.href = "//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic";
  font2.rel = "stylesheet";
  font2.type = "text/css";
  h.parentNode.insertBefore(font2, h);

  var fontub = document.createElement("link");
  fontub.href = "//fonts.googleapis.com/css?family=Ubuntu+Mono:400,700";
  fontub.rel = "stylesheet";
  fontub.type = "text/css";
  h.parentNode.insertBefore(fontub, h);

  // screen.css
  var l = document.createElement("link");
  l.href = "/stylesheets/screen.css";
  l.media = "screen, projection";
  l.rel = "stylesheet";
  l.type = "text/css";
  h.parentNode.insertBefore(l, h);

  // table css
  var tcss = document.createElement("link");
  tcss.href = "/stylesheets/data-table.css";
  tcss.media = "screen, projection";
  tcss.rel = "stylesheet";
  tcss.type = "text/css";
  h.parentNode.insertBefore(tcss, h);

  // CSS files for FancyBox
  var fbcss = document.createElement("link");
  fbcss.href = "/fancybox/source/jquery.fancybox.css?v=2.1.5";
  fbcss.rel = "stylesheet";
  fbcss.type = "text/css";
  fbcss.media = "screen, projection";
  document.body.appendChild(fbcss);
  var fbbtncss = document.createElement("link");
  fbbtncss.href = "/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5";
  fbbtncss.rel = "stylesheet";
  fbbtncss.type = "text/css";
  fbbtncss.media = "screen, projection";
  document.body.appendChild(fbbtncss);
  var fbthmcss = document.createElement("link");
  fbthmcss.href = "/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7";
  fbthmcss.rel = "stylesheet";
  fbthmcss.type = "text/css";
  fbthmcss.media = "screen, projection";
  document.body.appendChild(fbthmcss);
};

var raf = requestAnimationFrame || mozRequestAnimationFrame ||
    webkitRequestAnimationFrame || msRequestAnimationFrame;
if (raf) raf(cb);
else window.addEventListener('load', cb);
</script>
</body>
</html>
